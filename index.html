<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>منصة التسجيل - نفط ليبيا</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: 'Cairo', sans-serif;
      direction: rtl;
      margin: 0;
      padding: 0;
      background-color: #f0f4f8;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    #main-content {
      display: none;
      text-align: center;
    }

    #main-content h2 {
      color: #007bff;
      font-size: 24px;
    }

    .overlay {
      position: fixed;
      top: 0; right: 0; bottom: 0; left: 0;
      background-color: rgba(0, 0, 0, 0.6);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .popup {
      background: #fff;
      padding: 30px 25px;
      border-radius: 15px;
      max-width: 420px;
      text-align: center;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
      animation: popupAnim 0.4s ease;
      position: relative;
    }

    .popup img.logo {
      max-width: 120px;
      margin-bottom: 15px;
    }

    @keyframes popupAnim {
      from { transform: scale(0.8); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .popup h2 {
      color: #d93025;
      font-size: 22px;
      margin-bottom: 10px;
    }

    .popup p {
      font-size: 17px;
      color: #333;
      margin-bottom: 10px;
    }

    .countdown {
      font-size: 18px;
      color: #007bff;
      margin: 10px 0 20px;
      font-weight: bold;
    }

    .popup button {
      padding: 10px 22px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      transition: background 0.3s ease;
      display: none;
    }

    .popup button:hover {
      background-color: #0056b3;
    }
  </style>
</head>
<body>

  <!-- المحتوى الرئيسي -->
  <div id="main-content">
    <h2>مرحباً بك في منصة نفط ليبيا! ✅</h2>
  </div>

  <!-- نافذة منبثقة -->
  <div class="overlay" id="popup-overlay">
    <div class="popup">
      <img src="uy.jpeg" alt="شعار نفط ليبيا" class="logo">
      <h2>🔒 المنصة مغلقة حالياً</h2>
      <p>ساعات العمل: من 8 مساءً إلى 10 مساءً.<br>المنصة مغلقة يوم الجمعة بالكامل.</p>
      <div class="countdown" id="countdown">جارٍ الحساب...</div>
      <button id="ok-button" onclick="closePopup()">حسناً</button>
    </div>
  </div>

  <script>
    function isFriday(date) {
      return date.getDay() === 5;
    }

    function isOpenNow(date) {
      const hour = date.getHours();
      return !isFriday(date) && hour >= 20 && hour < 22;
    }

    function updateCountdown() {
      const now = new Date();
      const day = now.getDay();
      const currentHour = now.getHours();
      const currentMinute = now.getMinutes();

      const countdownElement = document.getElementById("countdown");
      const button = document.getElementById("ok-button");

      if (isFriday(now)) {
        countdownElement.innerText = "اليوم الجمعة - المنصة مغلقة بالكامل.";
        return;
      }

      let openTime = new Date();
      openTime.setHours(20, 0, 0, 0); // 8:00 مساءً

      if (now >= openTime && now.getHours() < 22) {
        document.getElementById("popup-overlay").style.display = "none";
        document.getElementById("main-content").style.display = "block";
      } else {
        let timeDiff = openTime - now;
        if (timeDiff < 0) {
          countdownElement.innerText = "الرجاء المحاولة غداً الساعة 8 مساءً.";
          return;
        }

        let minutes = Math.floor((timeDiff / 1000 / 60) % 60);
        let seconds = Math.floor((timeDiff / 1000) % 60);

        countdownElement.innerText = `سيفتح خلال ${minutes} دقيقة و ${seconds} ثانية`;

        setTimeout(updateCountdown, 1000);
      }
    }

    function closePopup() {
      document.getElementById("popup-overlay").style.display = "none";
    }

    // تشغيل العدّاد وزر "حسناً" بعد 10 ثوانٍ
    window.onload = () => {
      const now = new Date();
      if (isOpenNow(now)) {
        document.getElementById("popup-overlay").style.display = "none";
        document.getElementById("main-content").style.display = "block";
      } else {
        updateCountdown();
        setTimeout(() => {
          document.getElementById("ok-button").style.display = "inline-block";
        }, 10000); // زر "حسناً" يظهر بعد 10 ثوانٍ
      }
    }
  </script>

</body>
</html>
